{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, vModelSelect as _vModelSelect } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-12\"\n}, [/*#__PURE__*/_createElementVNode(\"h2\", null, \"Gestion des utilisateurs\")])], -1 /* HOISTED */);\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-12\"\n};\nconst _hoisted_5 = {\n  key: 0,\n  class: \"card\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-header\"\n}, [/*#__PURE__*/_createElementVNode(\"h3\", null, \"Ajouter un utilisateur\")], -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"card-body\"\n};\nconst _hoisted_8 = {\n  class: \"form-group\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"nom\"\n}, \"Nom\", -1 /* HOISTED */);\nconst _hoisted_10 = {\n  class: \"form-group\"\n};\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"nom\"\n}, \"Mot de passe\", -1 /* HOISTED */);\nconst _hoisted_12 = {\n  class: \"table\"\n};\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"thead\", null, [/*#__PURE__*/_createElementVNode(\"tr\", null, [/*#__PURE__*/_createElementVNode(\"th\", null, \"Nom\"), /*#__PURE__*/_createElementVNode(\"th\", null, \"Role ID\")])], -1 /* HOISTED */);\nconst _hoisted_14 = [\"onUpdate:modelValue\"];\nconst _hoisted_15 = [\"value\"];\nconst _hoisted_16 = [\"onClick\"];\nconst _hoisted_17 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    class: \"btn show-add-bouquet\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.toggleAddUtilisateur && $options.toggleAddUtilisateur(...args))\n  }, _toDisplayString($data.showAddUtilisateur ? 'Fermer' : 'Ajouter un utilisateur'), 1 /* TEXT */), $data.showAddUtilisateur ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_hoisted_6, _createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"form\", null, [_createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"newUtilisateurName\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.newUtilisateurName = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newUtilisateurName]])]), _createElementVNode(\"div\", _hoisted_10, [_hoisted_11, _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"newUtilisateurMDP\",\n    required: \"\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.newUtilisateurMDP = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.newUtilisateurMDP]])])]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\",\n    onClick: _cache[3] || (_cache[3] = $event => $options.createNewUtilisateur($data.newUtilisateurName, $data.newUtilisateurMDP))\n  }, \"Ajouter\")])])) : _createCommentVNode(\"v-if\", true)])]), _createElementVNode(\"table\", _hoisted_12, [_hoisted_13, _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(this.utilisateurs, (utilisateur, utilisateurIndex) => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: utilisateurIndex\n    }, [_createElementVNode(\"td\", null, _toDisplayString(utilisateur.nom_utilisateur), 1 /* TEXT */), _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"select\", {\n      \"onUpdate:modelValue\": $event => $data.selectedRole[utilisateur.id_utilisateur] = $event\n    }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.roles, (role, roleIndex) => {\n      return _openBlock(), _createElementBlock(\"option\", {\n        key: roleIndex,\n        value: role.id_role\n      }, _toDisplayString(role.nom_role), 9 /* TEXT, PROPS */, _hoisted_15);\n    }), 128 /* KEYED_FRAGMENT */))], 8 /* PROPS */, _hoisted_14), [[_vModelSelect, $data.selectedRole[utilisateur.id_utilisateur]]])]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-primary\",\n      onClick: $event => $options.modifierUtilisateur(utilisateur.id_utilisateur)\n    }, \" Modifier \", 8 /* PROPS */, _hoisted_16), _createElementVNode(\"button\", {\n      class: \"btn btn-danger\",\n      onClick: $event => $options.supprimerUtilisateur(utilisateur.id_utilisateur)\n    }, \" Supprimer \", 8 /* PROPS */, _hoisted_17)])]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.testPostFunc && $options.testPostFunc(...args))\n  }), _createElementVNode(\"p\", null, _toDisplayString($data.testPost), 1 /* TEXT */)])]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","for","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","onClick","_cache","args","$options","toggleAddUtilisateur","$data","showAddUtilisateur","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","type","id","required","$event","newUtilisateurName","_hoisted_10","_hoisted_11","newUtilisateurMDP","createNewUtilisateur","_createCommentVNode","_hoisted_12","_hoisted_13","_Fragment","_renderList","utilisateurs","utilisateur","utilisateurIndex","_toDisplayString","nom_utilisateur","selectedRole","id_utilisateur","roles","role","roleIndex","value","id_role","nom_role","_hoisted_15","_hoisted_14","modifierUtilisateur","_hoisted_16","supprimerUtilisateur","_hoisted_17","testPostFunc","testPost"],"sources":["/home/alexandrelesur/Documents/GitHub/site_fleuriste/Front/src/components/PanneauUtilisateur.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <h2>Gestion des utilisateurs</h2>\n        </div>\n      </div>\n      <div class=\"row\">\n            <div class=\"col-12\">\n                <button class=\"btn show-add-bouquet\" @click=\"toggleAddUtilisateur\">{{ showAddUtilisateur ? 'Fermer' : 'Ajouter un utilisateur'}}</button>\n                <div v-if=\"showAddUtilisateur\" class=\"card\">\n                <div class=\"card-header\">\n                    <h3>Ajouter un utilisateur</h3>\n                </div>\n                <div class=\"card-body\">\n                    <form>\n                    <div class=\"form-group\">\n                        <label for=\"nom\">Nom</label>\n                        <input type=\"text\" class=\"form-control\" id=\"newUtilisateurName\" required v-model=\"newUtilisateurName\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"nom\">Mot de passe</label>\n                        <input type=\"text\" class=\"form-control\" id=\"newUtilisateurMDP\" required v-model=\"newUtilisateurMDP\">\n                    </div>\n                    </form>\n                    <button type=\"submit\" class=\"btn btn-primary\" @click=\"createNewUtilisateur(newUtilisateurName,newUtilisateurMDP)\">Ajouter</button>\n                </div>\n                </div>\n            </div>\n        </div>\n      <table class=\"table\">\n        <thead>\n          <tr>\n            <th>Nom</th>\n            <th>Role ID</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(utilisateur,utilisateurIndex) in this.utilisateurs\" :key=\"utilisateurIndex\">\n            <td>{{ utilisateur.nom_utilisateur }}</td>\n            <td>\n            <select v-model=\"selectedRole[utilisateur.id_utilisateur]\"> \n              <option v-for=\"(role, roleIndex) in roles\" :key=\"roleIndex\" :value=\"role.id_role\">\n                {{ role.nom_role }}\n              </option>\n            </select>\n          </td>\n          <td>\n            <button class=\"btn btn-primary\" @click=\"modifierUtilisateur(utilisateur.id_utilisateur)\">\n              Modifier\n            </button>\n            <button class=\"btn btn-danger\" @click=\"supprimerUtilisateur(utilisateur.id_utilisateur)\">\n              Supprimer\n            </button>\n          </td>\n          </tr>\n        </tbody>\n      </table>\n      <div>\n        <button @click=\"testPostFunc\"></button>\n        <p>{{ testPost }}</p>\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import { getAllUsers, getAllRoles, updateUtilisateur, createUtilisateur, deleteUtilisateur, testPost } from '@/services/users.services'\n  \n  export default {\n    name: \"PanneauUtilisateur\",\n  \n    data() {\n      return {\n        utilisateurs: [],\n        roles: [],\n        selectedRole: {},\n        showAddUtilisateur: false,\n        newUtilisateurName: '',\n        newUtilisateurMDP: '',\n        testPost: ''\n      };\n    },\n    async mounted() {\n      this.utilisateurs = await this.getUtilisateur();\n      this.roles = await this.getRoles();\n    },\n  \n    methods: {\n        async testPostFunc() {\n          console.log(testPost());\n          this.testPost = await testPost();\n        },\n        async getUtilisateur() {\n            return await getAllUsers();\n        },\n        async getRoles(){\n            return await getAllRoles();\n        },\n        toggleAddUtilisateur() {\n            this.showAddUtilisateur = !this.showAddUtilisateur;\n        },\n        async modifierUtilisateur(id_utilisateur) {\n            const selectedRoleId = this.selectedRole[id_utilisateur]\n            let data = {\n                id_utilisateur: id_utilisateur,\n                id_role: selectedRoleId\n            }\n            await updateUtilisateur(data);\n        },\n        async createNewUtilisateur(nom_utilisateur,mot_de_passe) {\n            let data = {\n                nom_utilisateur: nom_utilisateur,\n                mot_de_passe: mot_de_passe\n            }\n            console.log(data);\n            await createUtilisateur(data)\n        },\n        async supprimerUtilisateur(id_utilisateur) {\n          console.log('supp',id_utilisateur);\n          await deleteUtilisateur(id_utilisateur)\n          location.reload();\n        }\n    }\n}\n  \n  </script>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}