{"ast":null,"code":"import { getAllArticle, updateArticle, deleteArticle, getAllTypeArticle, updateTypeArticle, createTypeArticle, deleteTypeArticle, createArticle } from '@/services/salondethe.services';\nexport default {\n  name: \"PanneauSdT\",\n  data() {\n    return {\n      articles: [],\n      type_articles: [],\n      newArticleName: '',\n      newArticlePrix: 0,\n      showAddArticle: false,\n      showAddTypeArticle: false,\n      selectedTypeId: {},\n      selectedTypeIdsArticle: {},\n      newTypeArticleName: ''\n    };\n  },\n  async mounted() {\n    this.articles = await this.getArticle();\n    this.type_articles = await this.getTypeArticle();\n  },\n  methods: {\n    async getArticle() {\n      return await getAllArticle();\n    },\n    async getTypeArticle() {\n      return await getAllTypeArticle();\n    },\n    toggleAddArticle() {\n      this.showAddArticle = !this.showAddArticle;\n    },\n    toggleAddTypeArticle() {\n      this.showAddTypeArticle = !this.showAddTypeArticle;\n    },\n    async createNewArticle(addArticleName, addArticlePrix, addIdTypeArticle = \"\") {\n      let data = {\n        nom_article: addArticleName,\n        prix_article: addArticlePrix,\n        id_type_article: addIdTypeArticle\n      };\n      await createArticle(data);\n      location.reload();\n      alert(\"Nouvel article créé\");\n    },\n    async createNewTypeArticle(newTypeArticleName) {\n      let data = {\n        nom_type_article: newTypeArticleName\n      };\n      await createTypeArticle(data);\n      location.reload();\n    },\n    async updateArticle(id_article, nom_article, prix_article) {\n      const selectedTypeIds = this.selectedTypeIdsArticle[id_article];\n      console.log(\"upArticle\", selectedTypeIds);\n      let data = {\n        id_article: id_article,\n        nom_article: nom_article,\n        prix_article: prix_article,\n        id_type_article: selectedTypeIds\n      };\n      await updateArticle(data);\n      alert(\"Article modifié\");\n    },\n    async updateTypeArticle(id_type_article, nom_type_article) {\n      let data = {\n        id_type_article: id_type_article,\n        nom_type_article: nom_type_article\n      };\n      await updateTypeArticle(data);\n    },\n    async deleteArticle(id_article) {\n      await deleteArticle(id_article);\n      location.reload();\n    },\n    async deleteTypeArticle(id_type_article) {\n      await deleteTypeArticle(id_type_article);\n      location.reload();\n    }\n  }\n};","map":{"version":3,"names":["getAllArticle","updateArticle","deleteArticle","getAllTypeArticle","updateTypeArticle","createTypeArticle","deleteTypeArticle","createArticle","name","data","articles","type_articles","newArticleName","newArticlePrix","showAddArticle","showAddTypeArticle","selectedTypeId","selectedTypeIdsArticle","newTypeArticleName","mounted","getArticle","getTypeArticle","methods","toggleAddArticle","toggleAddTypeArticle","createNewArticle","addArticleName","addArticlePrix","addIdTypeArticle","nom_article","prix_article","id_type_article","location","reload","alert","createNewTypeArticle","nom_type_article","id_article","selectedTypeIds","console","log"],"sources":["/home/alexandrelesur/Documents/GitHub/site_fleuriste/Front/src/components/PanneauSdT.vue"],"sourcesContent":["<template>\n    <div class=\"container\">\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <h2>Gestion des articles</h2>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <button class=\"btn show-add-typeArticle\" @click=\"toggleAddTypeArticle\">{{ showAddTypeArticle ? 'Fermer' : \"Ajouter un type d'article\"}}</button>\n                <div v-if=\"showAddTypeArticle\" class=\"card\">\n                <div class=\"card-header\">\n                    <h3>Ajouter un Type d'article</h3>\n                </div>\n                <div class=\"card-body\">\n                    <form>\n                    <div class=\"form-group\">\n                        <label for=\"nom\">Nom</label>\n                        <input type=\"text\" class=\"form-control\" id=\"newTypeArticleName\" required v-model=\"newTypeArticleName\">\n                    </div>\n                    \n                    </form>\n                    <button type=\"submit\" class=\"btn btn-primary\" @click=\"createNewTypeArticle(newTypeArticleName)\">Ajouter</button>\n                </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div v-for=\"(type, typeIndex) in this.type_articles\" :key=\"typeIndex\" class=\"card-min\">\n            <hr>\n            <h2>{{ type.nom_type_article }}</h2>\n            <div class=\"counter-container\">\n                <button class=\"btn btn-secondary\" @click=\"updateTypeArticle(type.id_type_article,type.nom_type_article)\">Modifier</button>\n                <button class=\"btn btn-danger\" @click=\"deleteTypeArticle(type.id_type_article)\">Supprimer</button>\n            </div>\n            </div>\n        </div> \n        <!-- article -->\n        <div class=\"row\">\n            <div class=\"col-12\">\n                <button class=\"btn show-add-article\" @click=\"toggleAddArticle\">{{ showAddArticle ? 'Fermer' : 'Ajouter un article'}}</button>\n                <div v-if=\"showAddArticle\" class=\"card\">\n                <div class=\"card-header\">\n                    <h3>Ajouter un article</h3>\n                </div>\n                <div class=\"card-body\">\n                    <form>\n                    <div class=\"form-group\">\n                        <label for=\"nom\">Nom</label>\n                        <input type=\"text\" class=\"form-control\" id=\"newArticleName\" required v-model=\"newArticleName\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"prix\">Prix</label>\n                        <input type=\"number\" step=\"0.01\" class=\"form-control\" id=\"newArticlePrix\" required v-model=\"newArticlePrix\">\n                    </div>\n                    <div class=\"form-group\">\n                        <label for=\"type\">Type</label>\n                        <select class=\"form-control\" id=\"newArticleType\" v-model=\"selectedTypeId\">\n                            <option v-for=\"(type, typeIndex) in type_articles\" :key=\"typeIndex\" :value=\"type.id_type_article\">{{ type.nom }}</option>\n                        </select>\n                    </div>\n\n                    </form>\n                    <button class=\"btn btn-primary\" @click=\"createNewArticle(newArticleName,newArticlePrix)\">Ajouter</button>\n                </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"row\">\n            <div v-for=\"(article, articleIndex) in this.articles\" :key=\"articleIndex\" class=\"card-min\">\n            <hr>\n            <h2>{{ article.nom_article }}</h2>\n            <p class=\"text\">\n                <u>Prix :</u> <input type=\"number\" :id=\"'articlePrice_' + article.prix_article\" v-model=\"article.prix_article\" min=\"1\"> €<br>\n            </p>\n            <div class=\"details-container\">\n                <hr>\n                <h3>Type d'article</h3>\n                <p>{{ article.nom_type_article }}</p>\n                <select name=\"type-article\" v-model=\"selectedTypeIdsArticle[article.id_article]\">\n                    <option v-for=\"(type, typeIndex) in type_articles\" :key=\"typeIndex\" :value=\"type.id_type_article\">\n                        {{ type.nom_type_article }}\n                    </option>\n                </select>\n                <hr>\n            </div>\n            <div class=\"counter-container\">\n                <button class=\"btn btn-secondary\" @click=\"updateArticle(article.id_article,article.nom_article, article.prix_article, article.id_type_article)\">Modifier</button>\n                <button class=\"btn btn-danger\" @click=\"deleteArticle(article.id_article)\">Supprimer</button>\n            </div>\n            </div>\n        </div> \n    </div>\n</template>\n<script>\nimport { getAllArticle, updateArticle, deleteArticle, getAllTypeArticle, updateTypeArticle, createTypeArticle, deleteTypeArticle, createArticle} from '@/services/salondethe.services';\n\n\nexport default {\n    name: \"PanneauSdT\",\n\n    data() {\n      return {\n        articles: [],\n        type_articles:[],\n        newArticleName:'',\n        newArticlePrix: 0,\n        showAddArticle: false,\n        showAddTypeArticle: false,\n        selectedTypeId: {},\n        selectedTypeIdsArticle: {},\n        newTypeArticleName:'',\n      };\n    },\n    async mounted() {\n        this.articles = await this.getArticle();\n        this.type_articles = await this.getTypeArticle();\n    },\n\n    methods: {\n        async getArticle() {\n            return await getAllArticle();\n        },\n        async getTypeArticle(){\n            return await getAllTypeArticle();\n        },\n        toggleAddArticle() {\n            this.showAddArticle = !this.showAddArticle;\n        },\n        toggleAddTypeArticle() {\n            this.showAddTypeArticle = !this.showAddTypeArticle;\n        },\n        async createNewArticle(addArticleName,addArticlePrix,addIdTypeArticle = \"\") {\n            let data = {\n                nom_article: addArticleName,\n                prix_article: addArticlePrix,\n                id_type_article: addIdTypeArticle\n            }\n            await createArticle(data);\n            location.reload();\n            \n            alert(\"Nouvel article créé\")\n        },\n        async createNewTypeArticle(newTypeArticleName) {\n            let data = {\n                nom_type_article: newTypeArticleName\n            }\n            await createTypeArticle(data)\n            location.reload();\n        }, \n\n        async updateArticle(id_article,nom_article,prix_article){\n            const selectedTypeIds = this.selectedTypeIdsArticle[id_article]\n            console.log(\"upArticle\", selectedTypeIds);\n            let data = {\n                id_article: id_article,\n                nom_article: nom_article,\n                prix_article: prix_article,\n                id_type_article: selectedTypeIds\n            }\n            await updateArticle(data);\n            alert(\"Article modifié\")\n        },\n        async updateTypeArticle(id_type_article,nom_type_article){\n            let data = {\n                id_type_article: id_type_article,\n                nom_type_article: nom_type_article\n            }\n            await updateTypeArticle(data);\n        },\n        async deleteArticle(id_article){\n            await deleteArticle(id_article)\n            location.reload();\n        },\n        async deleteTypeArticle(id_type_article){\n            await deleteTypeArticle(id_type_article)\n            location.reload();\n        }\n\n    }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}